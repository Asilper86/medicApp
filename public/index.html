<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MedicApp</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
<link rel="manifest" href="manifest.json">
</head>
<body>
<div id="app" class="app-container">

  <!-- Login / Registro -->
  <div id="auth" class="auth-container">
    <h1>MedicApp</h1>

    <div id="login-form">
      <input id="login-email" type="email" placeholder="Email">
      <input id="login-password" type="password" placeholder="Contraseña">
      <button onclick="login()">Iniciar sesión</button>
      <p>¿No tienes cuenta? <span onclick="showRegister()">Regístrate</span></p>
    </div>

    <div id="register-form" class="hidden">
      <input id="reg-name" type="text" placeholder="Nombre">
      <input id="reg-email" type="email" placeholder="Email">
      <input id="reg-password" type="password" placeholder="Contraseña">
      <button onclick="register()">Registrarse</button>
      <p>¿Ya tienes cuenta? <span onclick="showLogin()">Iniciar sesión</span></p>
    </div>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="hidden">
    <div class="dashboard-header">
      <h2>Tus Medicamentos</h2>
      <div class="dashboard-buttons">
        <button onclick="openUserMenu()">Perfil</button>
        <button onclick="logout()">Cerrar sesión</button>
      </div>
    </div>

    <!-- Formulario añadir medicamento -->
    <div class="med-form">
      <input id="med-name" type="text" placeholder="Nombre del medicamento">
      <input id="med-dosis" type="text" placeholder="Dosis">
      <input id="med-hora" type="time">
      <button onclick="addMed()">Añadir</button>
      <button onclick="scanReceta()">Escanear</button>
    </div>

    <!-- Lista de medicamentos -->
    <div id="med-list"></div>

    <!-- Ranking semanal -->
    <div class="ranking-container">
      <h3>Ranking Semanal</h3>
      <div id="ranking"></div>
    </div>
  </div>
</div>

<!-- Menú de usuario modal -->
<div id="user-menu" class="modal hidden">
  <div class="modal-content">
    <h3>Perfil</h3>
    <img id="profile-pic" src="" alt="Foto">
    <input type="file" id="profile-input">
    <input id="profile-name" type="text" placeholder="Nombre">
    <input id="profile-email" type="email" placeholder="Email" disabled>
    <input id="profile-password" type="password" placeholder="Nueva contraseña">
    <button onclick="saveProfile()">Guardar</button>
    <button onclick="closeUserMenu()">Cerrar</button>
  </div>
</div>

<input type="file" id="file-input" accept="image/*" capture="environment" class="hidden">

<script src="app.js" defer></script>
</body>
</html>
